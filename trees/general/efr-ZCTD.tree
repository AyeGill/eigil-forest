\date{2025-04-29}
\author{eigil-rischel}
\import{macros}
\title{Optics and Lenses}
\p{
  We have already given somewhat of an account of lenses, optics, and their applications in the introduction. We briefly review the theory here, especially to normalize the notation and definitions. The best general source for this material is still \ref{riley-optics}.
}

\p{
  The definition of optic relies on the notion of \em{coend}, which we briefly recall, see \ref{fosco-coend-calculus} for a textbook account. If #{F: \cI^\op \times \cI \to \cC} is a functor, the \em{coend} #{\int^{i \in I} F(i,i)} is defined as the initial object receiving a map #{f_i : F(i,i) \to \int^{i \in I} F(i,i)} for each #{i \in I}, so that for each #{\phi: i \to j}, the square
  \quiver{
    \begin{tikzcd}
    & F(i,i) \ar[rd] & \\
    F(j,i) \ar[ru] \ar[rd] & & \int^I \\
    & F(j,j) \ar[ur]
    \end{tikzcd}
  }
  commutes.
}
\p{
  If #{\cC} has enough colimits, we may express the coend as the coequalizer of the diagram
  ##{\coprod_{f : i \to j \in \cI} F(i,j) \rightrightarrows \coprod_{i} F(i,i),}
  where the two maps are given on each component by #{F(i,f): F(i,j) \to F(i,i)} and #{F(f,j) : F(i,j) \to F(j,j)}, respectively. (This is Remark 1.2.4 in \ref{fosco-coend-calculus}). Note that in particular this implies that if #{\cC} has all colimits, then it also has all coends.
}

\transclude{efr-MMQZ}
\p{
  Note that if #{\cM,\cC,\cD} are symmetric monoidal and these actions are symmetric, #{\Optic_\cM(\cC,\cD)} inherits a symmetric monoidal structure given by #{\arena{A}{X} \otimes \arena{B}{Y} = \arena{A \otimes B}{X \otimes Y}}. (Also given a braiding one can induce a non-symmetric monoidal structure, but this almost never comes up).
}

\transclude{efr-CRYH}
\p{
  As noted above, the coend #{\int^M \cC(X, M \cdot Y) \times \cD(M \cdot B, A)} consists of triples #{(M, f: X \to M \cdot Y, g: M \cdot B \to A)} up to the equivalence relation which, for every #{\phi: M \to M', f: X \to M \cdot Y, g: M' \cdot B \to A,} identifies the two tuples #{(M', (\phi \cdot 1_Y) f, g)} and #{(M, f, g (\phi \cdot 1_B))}. Note that this relation is not assumed to be inherently an equivalence relation---one takes the transitive-symmetric closure as usual.
}
\p{
  We call this relation the \em{sliding} relation (because we slide the map #{\phi} from the backwards part to the forwards part).
}

\transclude{efr-50T5} %Remark on local smallness

\p{
  Of course, we can also let the arrows in #{\cD} go in the same direction as #{\cC}. This does not seem to have played any role in the literature, but we will give this a name, as it is a useful example to have in mind for Markov fibrations (where we will construct our dependent optics, conceptually, as a fiberwise opposite)
}

\transclude{efr-G0YN}%COOPTICS

\transclude{efr-J0WW}
\transclude{efr-UNIN}
\p{
  The fact that in #{\Optic(\cM),} states (maps from the monoidal unit) on #{\arena{A}{X}} are given by states on #{X}, while costates are given by maps #{X \to A} plays an important role in the use of optics to describe open games. See \ref{efr-GFG0} for more on this.
}

\p{
  Let us say a few things about lenses.
}
\transclude{efr-M19V}
\p{
  In this case we sometimes write #{\Lens(\cC)} for the category #{\Optic(\cC)}. We have the following fact:
}
\transclude{efr-2793}
\transclude{efr-VTPS}
\p{
  This is the first way to see the maps of #{(\cC^\to)^\fop} as dependent lenses---they receive the category of lenses as a full subcategory. 
}
\transclude{efr-TZ0P}